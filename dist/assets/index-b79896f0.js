(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const L of l.addedNodes)L.tagName==="LINK"&&L.rel==="modulepreload"&&i(L)}).observe(document,{childList:!0,subtree:!0});function n(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=n(o);fetch(o.href,l)}})();let r=10;const E=document.querySelector(".album-data"),z=document.querySelectorAll(".album-button");function y(){let e,t,n,i;for(let o=r-10;o<r;o++){if(o>=s.length)return;t=document.createElement("tr");for(let l=0;l<4;l++)n=document.createElement("td"),l===0?i=document.createTextNode(`${o+1}.${s[o].get("name")}`):l===1?i=document.createTextNode(`${s[o].get("aname")}`):l===2?i=document.createTextNode(`${s[o].get("timesPlayed")}`):(e=(s[o].get("mins")/6e4/60).toFixed(2),i=document.createTextNode(`${e}`)),n.appendChild(i),t.appendChild(n);E.appendChild(t)}}function p(){for(;E.childNodes.length;)E.removeChild(E.childNodes[0])}function G(){z.forEach(e=>e.addEventListener("click",function(t){let n;if(n=t.target.innerText,n==="Next"){if(s.length-(r+10)<=-10)return;r=r+10,p(),y()}else{if(r===10)return;p(),r=r-10,y()}}))}G();const w=document.querySelector(".sort-album");w.addEventListener("click",Q);function Q(e){e.target.innerText==="Sort by Minutes"?(w.textContent="Sort by Times Listened",s.sort((t,n)=>n.get("mins")-t.get("mins")),p(),r=10,y()):(w.textContent="Sort by Minutes",s.sort((t,n)=>n.get("timesPlayed")-t.get("timesPlayed")),p(),r=10,y())}let c=10;const S=document.querySelector(".artist-data"),W=document.querySelectorAll(".artist-button");function g(){let e,t,n,i;for(let o=c-10;o<c;o++){if(o>=u.length)return;t=document.createElement("tr");for(let l=0;l<4;l++)n=document.createElement("td"),l===0?i=document.createTextNode(`${o+1}.${u[o].get("name")}`):l===1?i=document.createTextNode(`${u[o].get("timesPlayed")}`):l===2?(e=(u[o].get("mins")/6e4).toFixed(2),i=document.createTextNode(`${e}`)):i=document.createTextNode(`${(e/60).toFixed(2)}`),n.appendChild(i),t.appendChild(n);S.appendChild(t)}}function x(){for(;S.childNodes.length;)S.removeChild(S.childNodes[0])}function X(){W.forEach(e=>e.addEventListener("click",function(t){let n;if(n=t.target.innerText,n==="Next"){if(u.length-(c+10)<=-10)return;c=c+10,x(),g()}else{if(c===10)return;x(),c=c-10,g()}}))}X();const M=document.querySelector(".sort-artist");M.addEventListener("click",Z);function Z(e){e.target.innerText==="Sort by Minutes"?(M.textContent="Sort by Times Listened",u.sort((t,n)=>n.get("mins")-t.get("mins")),x(),c=10,g()):(M.textContent="Sort by Minutes",u.sort((t,n)=>n.get("timesPlayed")-t.get("timesPlayed")),x(),c=10,g())}let d=10;const T=document.querySelector(".track-data"),ee=document.querySelectorAll(".track-button");function b(){let e,t,n,i;for(let o=d-10;o<d;o++){if(o>=a.length)return;t=document.createElement("tr");for(let l=0;l<4;l++)n=document.createElement("td"),l===0?i=document.createTextNode(`${o+1}.${a[o].get("name")}`):l===1?i=document.createTextNode(`${a[o].get("aname")}`):l===2?i=document.createTextNode(`${a[o].get("timesPlayed")}`):(e=(a[o].get("mins")/6e4/60).toFixed(2),i=document.createTextNode(`${e}`)),n.appendChild(i),t.appendChild(n);T.appendChild(t)}}function C(){for(;T.childNodes.length;)T.removeChild(T.childNodes[0])}function te(){ee.forEach(e=>e.addEventListener("click",function(t){let n;if(n=t.target.innerText,n==="Next"){if(a.length-(d+10)<=-10)return;d=d+10,C(),b()}else{if(d===10)return;C(),d=d-10,b()}}))}te();const A=document.querySelector(".sort-track");A.addEventListener("click",ne);function ne(e){e.target.innerText==="Sort by Minutes"?(A.textContent="Sort by Times Listened",a.sort((t,n)=>n.get("mins")-t.get("mins")),C(),d=10,b()):(A.textContent="Sort by Minutes",a.sort((t,n)=>n.get("timesPlayed")-t.get("timesPlayed")),C(),d=10,b())}const $=document.querySelector(".platform"),N=document.querySelector(".countries");function oe(){for(;$.childNodes.length>2;)$.removeChild($.childNodes[0]);for(;N.childNodes.length>2;)N.removeChild(N.childNodes[0])}function ie(){let e;U.forEach(t=>{e=document.createElement("li"),e.textContent=t,$.appendChild(e)})}function le(){let e;H.forEach(t=>{e=document.createElement("li"),e.textContent=t,N.appendChild(e)})}const _=document.createElement("p"),F=document.createElement("p"),f=document.querySelector(".data-result");let v,k,D;function se(){v=(J/6e4).toFixed(2),k=(v/60).toFixed(2),D=(k/24).toFixed(2),_.textContent=`This data is only valid from ${K} to ${V}`,_.classList.add("data-result"),f.appendChild(_),F.textContent=`You have listened to music for ${v} mins or ${k} hours or ${D} days`,_.classList.add("data-result"),f.appendChild(F)}const I=document.createElement("p");function ae(){I.textContent="No file selected to upload",f.appendChild(I)}function re(){for(;f.childNodes.length;)f.removeChild(f.childNodes[0])}const ce=document.querySelectorAll("a");let O,de=["Home","Album","Track","Other","Artist"];function ue(e){O=document.getElementById(`${e}`),O.classList.remove("hidden"),de.forEach(t=>{t!=e&&document.getElementById(`${t}`).classList.add("hidden")})}function me(){ce.forEach(e=>{e.addEventListener("click",function(t){ue(t.target.innerText)})})}const j=document.querySelector(".loader");let h=[],s=[],u=[],a=[],U,H,q=[],B=[],m,J=0,K,V;function fe(){K=new Date(h[0].ts).toUTCString(),V=new Date(h.slice(-1)[0].ts).toUTCString()}function he(){h.forEach(e=>{J+=e.ms_played,q.push(e.platform),B.push(e.conn_country)}),U=new Set(q),H=new Set(B),q.length=0}function ye(e){m=1;let t=new Map;u.forEach(n=>{n.get("name")===e.master_metadata_album_artist_name&&(m=0,n.set("mins",n.get("mins")+e.ms_played),n.set("timesPlayed",n.get("timesPlayed")+1))}),m===1&&(t.set("name",e.master_metadata_album_artist_name),t.set("mins",e.ms_played),t.set("timesPlayed",1),u.push(t))}function pe(e){m=1;let t=new Map;a.forEach(n=>{n.get("url")===e.spotify_track_uri&&(m=0,n.set("mins",n.get("mins")+e.ms_played),n.set("timesPlayed",n.get("timesPlayed")+1))}),m===1&&(t.set("name",e.master_metadata_track_name),t.set("aname",e.master_metadata_album_artist_name),t.set("mins",e.ms_played),t.set("timesPlayed",1),t.set("url",e.spotify_track_uri),a.push(t))}function ge(e){m=1;let t=new Map;s.forEach(n=>{n.get("name")===e.master_metadata_album_album_name&&(m=0,n.set("mins",n.get("mins")+e.ms_played),n.set("timesPlayed",n.get("timesPlayed")+1))}),m===1&&(t.set("name",e.master_metadata_album_album_name),t.set("aname",e.master_metadata_album_artist_name),t.set("mins",e.ms_played),t.set("timesPlayed",1),s.push(t))}function xe(){for(const e of h)ye(e),pe(e),ge(e);u.sort((e,t)=>t.get("timesPlayed")-e.get("timesPlayed")),a.sort((e,t)=>t.get("timesPlayed")-e.get("timesPlayed")),s.sort((e,t)=>t.get("timesPlayed")-e.get("timesPlayed"))}function be(e){h=e.flat(),console.log(h[0]),he(),xe(),fe(),y(),ie(),le(),g(),b(),se(),j.classList.add("hidden-loader")}const R=document.createElement("p");let Ce=document.querySelector("#upload"),Y=document.querySelector('input[type="file"]');const _e=document.querySelector(".file-info"),P=document.querySelector(".file-list");function Ee(){for(;P.childNodes.length;)P.removeChild(P.childNodes[0])}function Se(e){Ee();let t=e.target.files;R.textContent="Click upload to use the above file(s)",_e.appendChild(R);for(let n=0;n<t.length;n++){let i=document.createElement("li");i.textContent=`File ${n+1} = ${t[n].name}`,P.appendChild(i)}}function Te(e){e.preventDefault();let t=Y.files;if(t.length===0){ae();return}j.classList.remove("hidden-loader"),re(),p(),x(),C(),oe();let n=[];for(let i=0;i<t.length;i++)n.push($e(t[i]));Promise.all(n).then(i=>{be(i)})}function $e(e){return new Promise(function(t,n){let i=new FileReader;i.onload=function(){t(JSON.parse(i.result))},i.onerror=function(){n(i)},i.readAsText(e)})}Y.addEventListener("change",Se);Ce.addEventListener("submit",Te);me();
